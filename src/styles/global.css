@import "tailwindcss";
@plugin "tailwindcss-animate";
@plugin "tailwindcss-motion";
@variant dark (&:where(.dark, .dark *));

:root {
  --background: 220 23% 95%;
  --foreground: 234 16% 5%;
  --muted: 220 12% 90%;
  --muted-foreground: 220 12% 30%;
  --popover: 220 23% 92%;
  --popover-foreground: 234 16% 25%;
  --card: 220 23% 93%;
  --card-foreground: 234 16% 30%;
  --border: 220 13% 90%;
  --input: 220 13% 87%;
  --primary: 266 85% 58%;
  --primary-foreground: 0 0% 100%;
  --secondary: 266 30% 75%;
  --secondary-foreground: 266 30% 15%;
  --accent: 220 23% 80%;
  --accent-foreground: 220 23% 20%;
  --destructive: 3 87% 37%;
  --destructive-foreground: 3 87% 97%;
  --ring: 266 85% 58%;
  --chart-1: 266 85% 58%;
  --chart-2: 266 30% 75%;
  --chart-3: 220 23% 80%;
  --chart-4: 266 30% 78%;
  --chart-5: 266 88% 58%;
  --rosewater: 11 59% 67%;
  --flamingo: 0 60% 67%;
  --pink: 316 73% 69%;
  --mauve: 266 85% 58%;
  --red: 347 87% 44%;
  --maroon: 355 76% 59%;
  --peach: 22 99% 52%;
  --yellow: 35 77% 49%;
  --green: 109 58% 40%;
  --teal: 183 74% 35%;
  --sky: 197 97% 46%;
  --sapphire: 189 70% 42%;
  --blue: 220 91% 54%;
  --lavender: 231 97% 72%;
}

.dark {
  --background: 232 23% 18%;
  --foreground: 227 68% 88%;
  --muted: 232 12% 22%;
  --muted-foreground: 232 12% 72%;
  --popover: 232 23% 15%;
  --popover-foreground: 227 68% 98%;
  --card: 232 23% 16%;
  --card-foreground: 227 68% 93%;
  --border: 232 13% 23%;
  --input: 232 13% 26%;
  --primary: 267 83% 80%;
  --primary-foreground: 267 83% 20%;
  --secondary: 267 30% 25%;
  --secondary-foreground: 267 30% 85%;
  --accent: 232 23% 33%;
  --accent-foreground: 232 23% 93%;
  --destructive: 1 85% 48%;
  --destructive-foreground: 0 0% 100%;
  --ring: 267 83% 80%;
  --chart-1: 267 83% 80%;
  --chart-2: 267 30% 25%;
  --chart-3: 232 23% 33%;
  --chart-4: 267 30% 28%;
  --chart-5: 267 86% 80%;
  --rosewater: 10 58% 90%;
  --flamingo: 0 58% 86%;
  --pink: 316 74% 85%;
  --mauve: 267 83% 80%;
  --red: 351 74% 73%;
  --maroon: 355 71% 77%;
  --peach: 21 86% 73%;
  --yellow: 40 70% 78%;
  --green: 105 48% 72%;
  --teal: 171 47% 69%;
  --sky: 189 59% 73%;
  --sapphire: 199 66% 69%;
  --blue: 220 83% 75%;
  --lavender: 234 82% 85%;
}

@theme {
  --radius: 0.75rem;
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 2px);
  --radius-2xl: calc(var(--radius) + 4px);

  --color-foreground: hsl(var(--foreground));
  --color-background: hsl(var(--background));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));

  --color-rosewater: hsl(var(--rosewater));
  --color-flamingo: hsl(var(--flamingo));
  --color-pink: hsl(var(--pink));
  --color-mauve: hsl(var(--mauve));
  --color-red: hsl(var(--red));
  --color-maroon: hsl(var(--maroon));
  --color-peach: hsl(var(--peach));
  --color-yellow: hsl(var(--yellow));
  --color-green: hsl(var(--green));
  --color-teal: hsl(var(--teal));
  --color-sky: hsl(var(--sky));
  --color-sapphire: hsl(var(--sapphire));
  --color-blue: hsl(var(--blue));
  --color-lavender: hsl(var(--lavender));

  @keyframes accordion-down {
    0% {
      height: 0;
    }
    100% {
      height: var(--kb-accordion-content-height);
    }
  }

  @keyframes accordion-up {
    0% {
      height: var(--kb-accordion-content-height);
    }
    100% {
      height: 0;
    }
  }

  @keyframes content-show {
    0% {
      opacity: 0;
      transform: scale(0.96);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes content-hide {
    0% {
      opacity: 1;
      transform: scale(1);
    }
    100% {
      opacity: 0;
      transform: scale(0.96);
    }
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background font-sans text-foreground antialiased;
  }
}

@layer components {
  /* Hide scrollbar for Chrome, Safari and Opera */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  /* Hide scrollbar for IE, Edge and Firefox */
  .no-scrollbar {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  .prose {
    @apply mx-auto w-full max-w-[80ch] scroll-smooth;

    h1 {
      @apply text-4xl font-extrabold tracking-tight lg:text-5xl;
    }

    h2 {
      @apply mt-10 border-b pb-2 text-3xl font-semibold tracking-tight first:mt-8;
    }

    h3 {
      @apply mt-8 text-2xl font-semibold tracking-tight;
    }

    h4 {
      @apply mt-6 text-xl font-semibold tracking-tight;
    }

    h5 {
      @apply mt-6 text-lg font-semibold tracking-tight;
    }

    h6 {
      @apply mt-6 text-base font-semibold tracking-tight;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      @apply scroll-mt-24;

      &:hover .anchor {
        @apply text-foreground opacity-100;
      }

      .anchor {
        @apply ml-1 rounded-md bg-background px-1 text-foreground no-underline opacity-0 transition-colors duration-75 select-none hover:bg-foreground hover:text-background;
      }
    }

    p {
      @apply leading-7 text-wrap [&:not(:first-child)]:mt-6;
    }

    blockquote {
      @apply mt-6 border-l-2 pl-6 italic;
    }

    ol,
    ul {
      @apply my-6 ml-6 list-disc [&>li]:mt-2;
    }

    code {
      @apply relative rounded bg-muted px-[0.3rem] py-[0.2rem] font-mono text-sm font-semibold;
    }

    .astro-code {
      @apply mt-4 rounded-sm border border-border px-4 py-2;

      code {
        @apply relative rounded-none bg-transparent bg-none p-0 text-base font-normal;
      }
    }

    @media (prefers-color-scheme: dark) {
      .markdown-alert {
        --color-border-default: #30363d;
        --color-accent-fg: #58a6ff;
        --color-accent-emphasis: #1f6feb;
        --color-danger-fg: #f85149;
        --color-danger-emphasis: #da3633;
        --color-attention-fg: #d29922;
        --color-attention-emphasis: #9e6a03;
        --color-done-fg: #a371f7;
        --color-done-emphasis: #8957e5;
        --color-success-fg: #3fb950;
        --color-success-emphasis: #238636;
      }
    }

    @media (prefers-color-scheme: light) {
      .markdown-alert {
        --color-border-default: #d0d7de;
        --color-accent-fg: #0969da;
        --color-accent-emphasis: #0969da;
        --color-danger-fg: #d1242f;
        --color-danger-emphasis: #cf222e;
        --color-attention-fg: #9a6700;
        --color-attention-emphasis: #9a6700;
        --color-done-fg: #8250df;
        --color-done-emphasis: #8250df;
        --color-success-fg: #1a7f37;
        --color-success-emphasis: #1f883d;
      }
    }

    .markdown-alert {
      border-left: 0.25em solid var(--borderColor-default, var(--color-border-default));
      color: inherit;
      margin-bottom: 16px;
      padding: 0.5rem 1em;
    }
    .markdown-alert > :last-child {
      margin-bottom: 0 !important;
    }
    .markdown-alert .markdown-alert-title {
      align-items: center;
      display: flex;
      font-size: 14px;
      font-weight: 500;
      line-height: 1;
    }
    .markdown-alert .markdown-alert-title svg.octicon {
      margin-right: 8px !important;
      margin-right: var(--base-size-8, 8px) !important;
      fill: currentColor;
    }
    .markdown-alert.markdown-alert-note {
      border-left-color: var(--borderColor-accent-emphasis, var(--color-accent-emphasis));
    }
    .markdown-alert.markdown-alert-note .markdown-alert-title {
      color: var(--color-accent-fg);
      color: var(--fgColor-accent, var(--color-accent-fg));
    }
    .markdown-alert.markdown-alert-tip {
      border-left-color: var(--borderColor-success-emphasis, var(--color-success-emphasis));
    }
    .markdown-alert.markdown-alert-tip .markdown-alert-title {
      color: var(--color-success-fg);
      color: var(--fgColor-success, var(--color-success-fg));
    }
    .markdown-alert.markdown-alert-important {
      border-left-color: var(--borderColor-done-emphasis, var(--color-done-emphasis));
    }
    .markdown-alert.markdown-alert-important .markdown-alert-title {
      color: var(--color-done-fg);
      color: var(--fgColor-done, var(--color-done-fg));
    }
    .markdown-alert.markdown-alert-warning {
      border-left-color: var(--borderColor-attention-emphasis, var(--color-attention-emphasis));
    }
    .markdown-alert.markdown-alert-warning .markdown-alert-title {
      color: var(--color-attention-fg);
      color: var(--fgColor-attention, var(--color-attention-fg));
    }
    .markdown-alert.markdown-alert-caution {
      border-left-color: var(--borderColor-danger-emphasis, var(--color-danger-emphasis));
    }
    .markdown-alert.markdown-alert-caution .markdown-alert-title {
      color: var(--color-danger-fg);
      color: var(--fgColor-danger, var(--color-danger-fg));
    }
  }

  .file-tree {
    @apply mt-6 overflow-x-auto border p-4 text-xs;

    img {
      @apply h-4 w-4;
    }

    .file {
      .tree-item {
        @apply inline-flex items-center gap-1;
      }
    }

    .tree-item {
      @apply px-[5px] py-0.5;
    }

    ul,
    ol {
      @apply my-0 ml-0 list-none border-l [&>li]:mt-0;
    }

    .directory {
      details {
        @apply bg-transparent marker:text-muted-foreground;

        summary {
          @apply mb-0.5 w-full transition-colors duration-75 hover:cursor-pointer hover:text-blue has-[.tree-item.highlight]:hover:[&_.highlight]:bg-accent/75;

          .tree-item {
            @apply inline-flex items-center gap-1;

            .tree-directory-icon {
              .close {
                @apply inline;
              }
              .open {
                @apply hidden;
              }
            }
          }
        }

        ul {
          @apply ml-1 pl-4;

          &:last-child {
          }
        }

        &[open] {
          summary {
            .tree-item {
              .tree-directory-icon {
                .close {
                  @apply hidden;
                }
                .open {
                  @apply inline;
                }
              }
            }
          }
        }
      }
    }

    .highlight {
      @apply rounded-sm bg-accent pr-2 text-accent-foreground transition-colors duration-75;
    }

    & > ul {
      @apply border-0;
      & > .file {
        @apply pl-3.5;
      }
    }
  }

  .expressive-code {
    @apply mt-6;
  }
}
